@using MbmStore.Models
@{
    ViewBag.Title = "Index";
}


@SortProducts(ViewBag.Products)

@helper RenderBook(Book book)
{
    <div style="margin-bottom: 60px;">
        <strong>Title: @book.Title </strong><br /> 
        Author: @book.Author <br>
        Price: @String.Format("{0:0.00}", book.Price)<br />
        Publisher: @book.Publisher <br>
        isbn: @book.ISBN <br>
        <img class="img-responsive" src="/content/images/@book.ImageUrl" /> <br />
    </div>

}

@helper RenderMusicCD(MusicCD MusicCD)
{

    <strong>Album: @MusicCD.Title  </strong>
    <p> Artist: @MusicCD.Artist</p>
    <p><img class="img-responsive" src="/content/images/@MusicCD.ImageUrl" /></p>
    <p>Price: @String.Format("{0:0.00}", MusicCD.Price)</p>


    <div>
        <ol>
            @foreach (Track track in MusicCD.Tracks)
            {
                <li>@track.Title (@track.Composer) @track.Length.Minutes:@track.Length.Seconds </li>
            }
        </ol>
    </div>

    <span style=" display: block; margin-bottom: 60px;"><b> total playing time: </b> @MusicCD.GetPlayingTime()</span> <br />

}


@helper SortProducts(List<Product> products)
{
    <div class="row">
        <div class="col-md-4">
            <h2> The Movies: </h2>
            @foreach (Product product in products)
            {
                if (product is Movie)
                {
                    Movie movie = (Movie)product;

            <div style="margin-bottom: 60px;">
                <strong>Title:@movie.Title </strong> <br />
                Director: @movie.Director <br>
                Price: @String.Format("{0:0.00}", movie.Price) <br /><br />
                <img class="img-responsive" src="/content/images/@movie.ImageUrl" />
            </div>
                }
            }
        </div>
        <div class="col-md-4">
            <h2> The Books: </h2>
            @foreach (Product product in products)
            {
                if (product is Book)
                {
                    Book book = (Book)product;

                    @RenderBook(book)
                }
            }
        </div>
        <div class="col-md-4">
            <h2> The Music: </h2>
            @foreach (Product product in products)
            {
                if (product is MusicCD)
                {
                    MusicCD musicCD = (MusicCD)product;

                    @RenderMusicCD(musicCD)
                }
            }
        </div>
    </div>








}

